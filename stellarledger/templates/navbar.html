{% extends './base.html' %}
{% block navbar %}
<nav class="navbar navbar-expand-lg navbar-light" style="background-color: #8860d0;">
    <a style="font-family: Sofia, sans-serif; font-size: 170%;" class="navbar-brand" href="{% url 'home' %}">Stellar Ledger</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-center" id="navbarNavDropdown" style=" font-size: 120%; font-weight: bold;">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="{% url 'viewTransaction' %}">Reports</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'viewCategories' %}">Categories</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Track Ethereum</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'viewFriend' %}">Friends</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#graph">Graphs</a>
        </li>
        {% if user.is_authenticated %}
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" onclick="dropdown()" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="background-color: #8860d0;">
            {{ user.username }}
          </button>
          <div class="dropdown-menu" id="dropdownuser">
            <a class="dropdown-item" href="{% url 'account_reauthenticate' %}">Reauthenticate</a>
            <a class="dropdown-item" href="{% url 'account_change_password' %}">Password Change</a>
            <a class="dropdown-item" href="{% url 'account_reset_password' %}">Password Reset</a>
            <a class="dropdown-item" href="{% url 'account_set_password' %}">Set Password</a>
            <a class="dropdown-item" href="{% url 'account_email_verification_sent' %}">Confirm Email</a>
            <a class="dropdown-item" href="{% url 'account_logout' %}">Logout</a>
          </div>
        </li>
        {% else %}
        <li class="nav-item">
          <a class="nav-link" href="{% url 'account_login' %}">login</a>
        </li>
        {% endif %}
      </ul>
    </div>
  </nav>

  {% if messages %}
  <div class="alert alert-danger" role="alert">
    <ul class="messages">
        {% for message in messages %}
        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
        {% endfor %}
    </ul>
  </div>
    {% endif %}

  <script>
    function dropdown() {
  document.getElementById("dropdownuser").classList.toggle("show");
}

// Close the dropdown menu if the user clicks outside of it
window.onclick = function(event) {
  if (!event.target.matches('.dropdown-toggle')) {
    var dropdowns = document.getElementsByClassName("dropdown-menu");
    var i;
    for (i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}
  </script>
{% endblock %}